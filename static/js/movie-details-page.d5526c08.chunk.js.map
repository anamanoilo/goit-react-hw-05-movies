{"version":3,"file":"static/js/movie-details-page.d5526c08.chunk.js","mappings":"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","sources":["webpack://react-homework-template/./src/pages/MovieDetailsPage/MovieDetailsPage.module.scss?c5cb","pages/MovieDetailsPage/MovieDetailsPage.jsx","services/ApiService.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"MovieDetailsPage_wrapper__sCX33\",\"cardWrapper\":\"MovieDetailsPage_cardWrapper__43xqk MovieDetailsPage_wrapper__sCX33\",\"item\":\"MovieDetailsPage_item__hR45E\",\"contentWrapper\":\"MovieDetailsPage_contentWrapper__B8GXY\",\"infoLink\":\"MovieDetailsPage_infoLink__hsymv\",\"activeInfoLink\":\"MovieDetailsPage_activeInfoLink__BaghR\"};","import { useState, useEffect, lazy, Suspense } from 'react';\nimport {\n  useParams,\n  useHistory,\n  useLocation,\n  useRouteMatch,\n  NavLink,\n  Route,\n} from 'react-router-dom';\nimport s from './MovieDetailsPage.module.scss';\nimport notFoundImg from 'images/not_found_ver.jpg';\nimport api from 'services/ApiService';\nimport Loader from 'components/Loader/Loader';\nconst Cast = lazy(() =>\n  import('components/Cast' /* webpackChunkName: \"cast\" */)\n);\nconst Reviews = lazy(() =>\n  import('components/Reviews' /* webpackChunkName: \"reviews\" */)\n);\n\nconst MovieDetailsPage = () => {\n  const [movie, setMovie] = useState(null);\n\n  const { movieId } = useParams();\n  const history = useHistory();\n  const location = useLocation();\n  const { url } = useRouteMatch();\n\n  useEffect(() => {\n    if (movieId) {\n      (async () => {\n        api.movieId = movieId;\n        try {\n          const data = await api.fetchMovieDetails();\n          setMovie(data);\n        } catch (err) {}\n      })();\n    }\n  }, [movieId]);\n\n  const onGoBackClick = () => {\n    history.push(location?.state?.from ?? '/');\n  };\n\n  return (\n    <section>\n      <button type=\"button\" onClick={onGoBackClick}>\n        Go Back\n      </button>\n      {movie && (\n        <>\n          <div className={s.cardWrapper}>\n            <img\n              src={\n                movie.poster_path\n                  ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n                  : notFoundImg\n              }\n              alt={movie.title || movie.name}\n              width=\"300px\"\n            />\n            <div className={s.contentWrapper}>\n              <h2>\n                {movie.title || movie.name}(\n                {new Date(\n                  movie.release_date || movie.first_air_date\n                ).getFullYear()}\n                )\n              </h2>\n              <p>User Score: {movie.vote_average * 10}%</p>\n              <h2>Overview</h2>\n              <p>{movie.overview || 'Data not found'}</p>\n              <h2>Genres</h2>\n              <p>\n                {movie.genres.map(({ name }) => name).join(' ') ||\n                  'Genres not found'}\n              </p>\n            </div>\n          </div>\n          <div className={s.wrapper}>\n            <h2>Additional information</h2>\n            <NavLink\n              className={s.infoLink}\n              activeClassName={s.activeInfoLink}\n              to={{\n                pathname: `${url}/cast`,\n                state: { ...location.state },\n              }}\n            >\n              Cast\n            </NavLink>\n            <NavLink\n              className={s.infoLink}\n              activeClassName={s.activeInfoLink}\n              to={{\n                pathname: `${url}/reviews`,\n                state: { ...location.state },\n              }}\n            >\n              Reviews\n            </NavLink>\n          </div>\n          <div>\n            <Suspense fallback={<Loader />}>\n              <Route path={`/movies/:movieId/cast`}>\n                <Cast />\n              </Route>\n              <Route path={`/movies/:movieId/reviews`}>\n                <Reviews />\n              </Route>\n            </Suspense>\n          </div>\n        </>\n      )}\n    </section>\n  );\n};\n\nexport default MovieDetailsPage;\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://api.themoviedb.org/3';\n\nclass ApiService {\n  #API_KEY = '53d591c4c7c46fce2d77997efee7f254';\n  page = 1;\n  movieId = 0;\n  searchQuery = '';\n\n  async fetchTrendingMovies() {\n    const response = await axios.get(\n      `/trending/movies/day?api_key=${this.#API_KEY}&page=${this.page}`\n    );\n    return response.data;\n  }\n\n  async fetchMovieDetails() {\n    const response = await axios.get(\n      `/movie/${this.movieId}?api_key=${this.#API_KEY}`\n    );\n    return response.data;\n  }\n\n  async fetchMovieCast() {\n    const response = await axios.get(\n      `/movie/${this.movieId}/credits?api_key=${this.#API_KEY}`\n    );\n    return response.data;\n  }\n  async fetchMovieReviews() {\n    const response = await axios.get(\n      `/movie/${this.movieId}/reviews?api_key=${this.#API_KEY}`\n    );\n    return response.data;\n  }\n\n  async fetchMovieByKeyword() {\n    const response = await axios.get(\n      `/search/movie/?api_key=${this.#API_KEY}&query=${this.searchQuery}&page=${\n        this.page\n      }&include_adult=false`\n    );\n    return response.data;\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n}\nconst api = new ApiService();\n\nexport default api;\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}"],"names":["Cast","lazy","Reviews","useState","movie","setMovie","movieId","useParams","history","useHistory","location","useLocation","url","useRouteMatch","useEffect","api","data","type","onClick","push","state","from","className","s","src","poster_path","notFoundImg","alt","title","name","width","Date","release_date","first_air_date","getFullYear","vote_average","overview","genres","map","join","activeClassName","to","pathname","Suspense","fallback","Loader","path","axios","ApiService","page","searchQuery","this","response","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties"],"sourceRoot":""}